# **套接字选项**
***


## **1. getsockopt和setsockopt函数**
        #include <sys/socket.h>
        int getsockopt(int sockfd, int level, int optname,
            void* optval, socklen_t* optlen);
        int setsockopt(int sockfd, int level, int optname,
            void* optval, socklen_t optlen);
    1) 套接字选项粗分为两个基本类型：一个是启用或禁止某个特性的二元选项，二
       是取得并返回我们可以设置或检查的特定值的选项
> ### **1.1 套接字选项表**
    1) SOL_SOCKET
        * SO_BROADCAST: get/set; 允许发送广播数据报; 标志; int类型
        * SO_DEBUG: get/set; 开启调试跟踪; 标志; int类型
        * SO_DONTROUTE: get/set; 绕过外出路由表查询; 标志; int类型
        * SO_ERROR: get; 获取待处理错误并清除; int类型
        * SO_KEEPALIVE: get/set; 周期性测试连接是否存活; 标志; int类型
        * SO_LINGER: get/set; 若有数据待发送则延迟关闭; linger{}类型
        * SO_OOBINLINE: get/set; 让接收到的带外数据连续在线留存;标志;int类型
        * SO_RCVBUF: get/set; 接收缓冲区大小; int类型
        * SO_SNDBUF: get/set; 发送缓冲区大小; int类型
        * SO_RCVLOWAT: get/set; 接收缓冲区低水位标记; int类型
        * SO_SNDLOWAT: get/set; 发送缓冲区低水位标记; int类型
        * SO_RCVTIMEO: get/set; 接收超时; timeval{}类型
        * SO_SNDTIMEO: get/set; 发送超时; timeval{}类型
        * SO_REUSEADDR: get/set; 允许重用本地址; 标志; int类型
        * SO_REUSEPORT: get/set; 允许重用本端口; 标志; int类型
        * SO_TYPE: get; 取得套接字类型; int类型
        * SO_USELOOPBACK: get/set; 路由套接字取得所发送数据副本;标志;int类型
    2) IPPROTO_IP
        * IP_HDRINCL: get/set; 随数据包含的IP首部; 标志; int类型
        * IP_OPTIONS: get/set; IP首部选项; 
        * IP_RECVDSTADDR: get/set; 返回目的IP地址; 标志; int类型
        * IP_RECVIF: get/set; 返回接收接口索引; 标志; int类型
        * IP_TOS: get/set; 服务类型和优先权; int类型
        * IP_TTL: get/set; 存活时间; int类型
        * IP_MULTICAST_IF: get/set; 指定外出接口; in_addr{}类型
        * IP_MULTICAST_TTL: get/set; 指定外出TTL; u_char类型
        * IP_MULTICAST_LOOP: get/set; 指定是否环回; u_char类型
        * IP_ADD_MEMBERSHIP: set; 加入多播组; ip_mreq{}类型
        * IP_DROP_MEMBERSHIP: set; 离开多播组; ip_mreq{}类型
        * IP_BLOCK_SOURCE: set; 阻塞多播源; ip_mreq_source{}类型
        * IP_UNBLOCK_SOURCE: set; 开通多播源头; ip_mreq_source{}类型
        * IP_ADD_SOURCE_MEMBERSHIP: set; 加入源特定多播组; ip_mreq_source{}
        * IP_DROP_SOURCE_MEMBERSHIP: set;离开源特定多播组; ip_mreq_source{}
    3) IPPROTO_ICMPV6
        * ICMP6_FILTER: get/set; 指定待传递的ICMPv6消息类型; icmp6_filter{}
    4) IPPROTO_IPV6
        * IPV6_CHECKUSM: get/set; 原始套接字的校验和字段偏移; int类型
        * IPV6_DONTFRAG: get/set; 丢弃大的分组而非将其分片;标志;int类型
        * IPV6_NEXTHOP: get/set; 指定下一跳地址; sockaddr_in6{}类型
        * IPV6_PATHMTU: get; 获取当前路径MTU; ip6_mtuinfo{}类型
        * IPV6_RECVDSTOPTS: get/set;接收目的地选项;标志;int类型
        * IPV6_RECVHOPLIMIT: get/set;接收单播跳限; 标志; int类型
        * IPV6_RECVHOPOPTS: get/set; 接收步跳选项; 标志; int类型
        * IPV6_RECVPATHMTU: get/set; 接收路径MTU; 标志; int类型
        * IPV6_RECVPKTINFO: get/set; 接收分组信息; 标志; int类型
        * IPV6_RECVRTHDR: get/set; 接收源路径; 标志; int类型
        * IPV6_RECVTCLASS: get/set; 接收流通类型; 标志; int类型
        * IPV6_UNICAST_HOPS: get/set; 默认单播跳限; int类型
        * IPV6_USE_MIN_MTU: get/set; 使用最小MTU; 标志; int类型
        * IPV6_V6ONLY: get/set; 禁止v4兼容; 标志; int类型
        * IPV6_XXX: get/set; 粘附性辅助数据
        * IPV6_MULTICAST_IF: get/set; 指定外出接口; u_int类型
        * IPV6_MULTICAST_HOPS: get/set; 指定外出跳限; int类型
        * IPV6_MULTICAST_LOOP: get/set; 指定是否环回; 标志; u_int类型
        * IPV6_JOIN_GROUP: set; 加入多播组; ipv6_mreq{}类型
        * IPV6_LEAVE_GROUP: set; 离开多播组; ipv6_mreq{}类型
    5) IPPROTO_IP或IPPROTO_IPV6
        * MCAST_JOIN_GROUP: set; 加入多播组; group_req{}类型
        * MCAST_LEAVE_GROUP: set; 离开多播组; group_req{}
        * MCAST_BLOCK_SOURCE: set; 阻塞多播源; group_source_req{}
        * MCAST_UNBLOCK_SOURCE: set; 开通多播源; group_source_req{}
        * MCAST_JOIN_SOURCE_GROUP: set; 加入源特定多播组; group_source_req{}
        * MCAST_LEAVE_SOURCE_GROUP: set;离开源特定多播组; group_source_req{}
    6) IPPROTO_TCP
        * TCP_MAXSEG: get/set; TCP最大分节大小; int类型
        * TCP_NODELAY: get/set; 禁止Nagle算法; 标志; int类型
    7) IPPROTO_SCTP
        * SCTP_ADAPTION_LAYER: get/set;适配层指示;sctp_setadaption{}
        * SCTP_ASSOCINFO: get/set; 检查并设置关联信息;sctp_assocparams{}
        * SCTP_AUTOCLOSE: get/set; 自动关闭操作; int类型
        * SCTP_DEFAULT_SEND_PARAM: get/set;默认发送参数;sctp_sndrcvinfo{}
        * SCTP_DISABLE_FRAGMENTS: get/set;SCTP分片;标志;int类型
        * SCTP_EVENTS: get/set; 感兴趣事件的通知;sctp_event_subscribe{}
        * SCTP_GET_PEER_ADDR_INFO: get;获取对端地址状态;sctp_paddrinfo{}
        * SCTP_I_WANT_MAPPED_V4_ADDR:get/set;映射的v4地址;标志;int类型
        * SCTP_INITMSG: get/set; 默认init参数; sctp_initmsg{}
        * SCTP_MAXBURST: get/set; 最大猝发大小; int类型
        * SCTP_NODELAY: get/set; 禁止Nagle算法; 标志; int类型
        * SCTP_PEER_ADDR_PARAMS: get/set;对端地址参数;sctp_paddrparams{}
        * SCTP_PRIMARY_ADDR: get/set; 主目的地址; sctp_setprim{}
        * SCTP_PTOINFO: get/set; RTO信息; sctp_rtoinfo{}
        * SCTP_SET_PEER_PRIMARY_ADDR: set; 对端主目的地址;sctp_setpeerprim{}
        * SCTP_STATUS: get; 获取关联状态; sctp_status{}

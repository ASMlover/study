# **Unix域协议**
***

## **1. 使用Unix域套接字的理由**
    1) 在Berkeley实现中，Unix域套接字比通信两端位于同一主机的TCP套接字快出一
       倍；
    2) Unix域套接字可用于同一主机上的不同进程之间传递描述符；
    3) Unix域套接字较新的实现把客户的凭证提供给服务器，从而能够提供额外的安
       全检查措施；


## **2. Unix域套接字地址结构**
    1) Unix域套接字地址结构在<sys/un.h>
        struct sockaddr_un {
          sa_family_t sun_family;
          char        sun_path[104];
        };
        * 存放在sun_path数组中的路径名必须以空字符结尾；
        * 提供的SUN_LEN宏以一个指向sockaddr_un结构的指针为参数并返回该结构的
          长度，其中包含路径名中的非空字节数；
        * sun_family应该设置为AF_LOCAL；

## **3. socketpair函数**
    1) 该函数只能用于Unix套接字；
    2) 函数定义：
        #include <sys/socket.h>
        int socketpair(int family, int type, int protocol, int sockfd[2]);
                => 成功返回非0，出错返回-1
        * family参数必须为AF_LOCAL，protocol参数必须为0；type参数既可以是
          SOCK_STREAM，也可以是SOCK_DGRAM；
        * 当type为SOCK_STREAM调用socketpair得到的结果是流管道；与调用pipe创
          建的普通Unix管道类似，流管道是全双工的，两个描述符都是即可读又可写


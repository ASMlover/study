# **线程安全的对象生命期管理**
***

## **析构函数遇到多线程**
  * **1、可能出现的静态条件**
    - 析构一个对象时，是否有别的线程正在执行该对象的成员函数？
    - 执行成员函数期间，对象会不会在其他线程被析构？
    - 调用某对象成员函数前，如何得知其还活着？其析构是否执行到一半？
  * **2、线程安全定义**
    - 多个线程同时访问时，行为正确
    - 无论OS如果调度这些线程，无论这些线程的执行顺序如何
    - 调用端代码无须额外同步操作和其他协调操作
  * **3、对象创建期间不要泄漏this指针**
    - 禁止在构造函数中注册回调
    - 禁止在构造函数中将this传递给跨线程对象
    - 即使构造函数最后一行也不行

# HotfixServer 测试用例文档

## 基础服务
1. 启动服务后访问 `/health` 返回 `{"status":"ok"}`。
2. 访问 `/` 能加载前端页面并正常渲染。

## 上传接口
1. 上传包含 `h75` + `hotfix` 的文件，返回 `saved` 且列表显示在对应模式。
2. 上传文件名不包含任何模式关键字，返回 400 且不落盘。
3. 同时上传多文件，其中一个非法，合法文件保存且响应包含 `warnings`。

## 列表接口
1. 访问 `/api/files` 返回四个模式，且每个模式内按上传时间逆序排列。
2. 列表返回的 `uploaded_at` 为 ISO 时间字符串，前端可正常显示。

## 下载接口
1. 访问 `/files/<name>` 能下载已上传文件，内容一致。
2. 文件不存在时返回 404。

## 删除接口
1. 白名单 IP 调用 `DELETE /files/<name>` 返回 200 且文件消失。
2. 非白名单 IP 调用删除返回 403，文件仍存在。
3. 删除后 `/api/files` 中不再出现对应记录。

## 保留策略
1. 每种模式上传超过上限时，只保留最新 N 个文件。
2. `mode_limits` 覆盖时，每个模式使用独立上限。

## 前端交互
1. Tab 切换时背景色渐变变化且卡片随模式更新。
2. 删除按钮仅在白名单 IP 客户端可见。
3. 页面不展示上传入口，仅提供下载与删除。
4. 时间显示（指针 + 数字）每秒更新。

## 日志
1. 启动时先输出字符 LOGO，再输出配置与监听日志。
2. 不同日志等级在控制台呈现不同颜色。
3. 修改 `config.json` 中的 `log_level` 后，日志等级在运行中生效。

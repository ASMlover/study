# **Web基础** #
***


## **1. Web工作方式** ##
    1) 参见./pic/web-work-style.png
    2) Web服务器的工作原理可以简单归纳为:
        * 客户机通过TCP/IP协议建立到服务器的TCP连接
        * 客户端向服务器发送HTTP协议请求包, 请求服务器里的资源文档
        * 服务器向客户机发送HTTP协议应答包, 如果请求的资源包含有动态语言的内
          容, 那么服务器会调用动态语言的解释引擎负责处理"动态内容", 并将处理
          得到的数据返回到客户端
        * 客户机于服务器断开, 由客户端解释HTML文档, 在客户端屏幕上渲染图形
          结果
    3) DNS解析的过程:
          DNS解析请参见./pic/dns-inquery.png/
          以输入www.qq.com为例子
        * 在浏览器中输入域名, 操作系统会先检查本地的hosts文件是否有这个网址
          的映射关系, 如果有, 就先调用这个IP地址映射, 完成域名解析
        * 如果hosts中没这个域名的映射, 则查找本地DNS解析器缓存是否有这个网址
          的映射关系, 如果有则直接返回, 完成域名解析
        * 如果hosts于本地DNS解析器缓存都没有相应的网址映射关系, 会先找TCP/IP
          参数设置的首选DNS服务器, 我们叫它本地DNS服务器; 此服务器收到查询时
          如果要查找的域名包含在本地配置区域的资源中, 则返回解析结果到客户机
          完成域名解析, 此解析具有权威性
        * 如果要查找的域名不由本地DNS服务器区域解析, 但该服务器已缓存了此网
          址的映射关系, 则调用这个IP地址映射, 完成域名解析, 此解析不具备权威
          性
        * 如果本地DNS服务器本地区域文件与缓存解析都失效, 则根据本地DNS服务器
          的设置进行查询, 如果未用转发模式, 本地DNS就把请求发送到"根DNS服务
          器", "根DNS服务器"收到请求后会判断这个域名是谁来授权管理的, 并会返
          回一个负责该顶级域名服务器的一个IP; 本地DNS服务器收到IP信息后, 会
          联系负责.com域的这台服务器, 这台负责.com域的服务器接收到请求后如果
          自己无法解析, 就会找一个管理.com域的下一级DNS服务器(qq.com)给本地
          DNS服务器; 当本地DNS服务器收到这个域名后, 就会找qq.com域服务器, 重
          复上面的操作, 进行查询, 直到找到www.qq.com主机
        * 如果用的是转发模式, 此DNS服务器就会把请求转发到上一级DNS服务器, 由
          上一级服务器进行解析, 上一级服务器如果不能解析, 或找根DNS或把请求
          转发到上上级, 如此循环; 不管是本地DNS服务器用的是转发还是根提示, 
          最后都是把结果返回到本地DNS服务, 由此DNS服务器再返回到客户机

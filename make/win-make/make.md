# **Windows nmake** #
***

* windows下的make工具, 可以在配置文件的基础上自动化调用cl, rc, link等工具, 开发人员之需要运行一条命令就可以完成整个工程的编译



## **1. 完整命令行参数** ##
> ### **1.1 参数格式** ###
    nmake [option] [/f makefile] [/x stderrfile] [macrodefs] [targets]  
> ### **1.2 参数详解** ###
    1) /A => 强制生成所有相关目标
    2) /B => 如果目标与依赖项时间戳相等, 也运行命令
    3) /C => 不显示默认输出, 取消/K选项发出的警告
    4) /D => 当目标不存在, 显示每个已检测的目标、依赖项和取消的时间戳
    5) /E => 用环境变量替换makefile中的宏定义
    6) /ERRORREPORT => 向微软报告运行nmake的错误
    7) /F => 指定makefile的文件
    8) /G => 显示!include指令中包含的生成文件
    9) /HELP, /? => 显示帮助信息
    10) /I => 忽略所有命令的退出代码
    11) /K => 如果命令返回错误, 继续生成不相关的依赖项
    12) /N => 显示但不执行命令, 仅执行预处理命令
    13) /NOLOGO => 不显示nmake的版权信息
    14) /P => 显示标准输出的信息然后运行
    15) /Q => 检查目标的时间戳, 不运行生成
    16) /R => 清除.SUFFIXES列表, 忽略Tools.ini文件中定义的或者预定义的推理规则和宏
    17) /S => 取消已执行命令的显示
    18) /T => 更新命令行目标的时间戳并执行预处理命令, 但不执行
    19) /U => 必须与/N一起使用, 转储内联nmake文件, 便于/N输出可用于批处理文件
    20) /X => 将nmake错误储存到指定的文件
    21) /Y => 禁用批模式推理规则, 所有批模式推理规则被视为常规推理规则



## **2. 宏** ##
> ### **2.1 宏定义** ###
    宏名字=宏值
> ### **2.2 宏引用** ###
    使用$(宏名)引用宏
> ### **2.3 预定义宏** ###
    Platform SDK中已经为用户定义的宏成为预定义宏
> ### **2.4 特殊宏** ###
    1) $@ => 当前目标的全名
    2) $$@ => 当前目标的全名, 作为依赖项
    3) $* => 除去了文件扩展名的当前目标全名
    4) $** => 当前目标的所有依赖项
    5) $? => 时间戳晚于当前目标的时间戳的所有依赖项
    6) $< => 时间戳晚于当前目标的时间戳的所有依赖项, 在推理规则的命令中有效
    7) MAKE => 调用NMAKE
    8) MAKEDIR => 调用NMAKE时的当前目录
    9) MAKEFLAGS => 当前有效的选项, 使用方法如: /$(MAKEFLAGS)

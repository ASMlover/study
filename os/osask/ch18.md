# **dir(ls)命令** #
***


## **1. 控制光标闪烁** ##
    1) 我们来实现, 只有可以接受键盘输入的窗口有光标闪烁, 而其他窗口不显示光
       标
    2) 具体例子请参见./os-src/toyos8d/


## **2. 控制控制台窗口的光标闪烁** ##
    1) 我们不能直接在主任务中控制控制台窗口的光标闪烁, 我们应该让主任务告诉
       控制台窗口是否闪烁光标
    2) 具体例子请参见./os-src/toyos8e/


## **3. 支持回车键** ##
    1) 对于回车键, 我们现在只是支持简单的换行即可(实际上可能会根据输入的内容
       来执行相应的操作等)
    2) 我们只需要处理按下回车键(0x1c)然后向命令行窗口发送(0x0a + 256)即可
    3) 具体例子请参见./os-src/toyos8f/


## **4. 对窗口滚动的支持** ##
    1) 现在我们的命令行窗口在最后一行的时候回车键就不管用了, 这是因为下面没
       有更多的行了
    2) 要实现窗口的向下移动, 只需要将所有元素上移一行就可以了, 同时将最下面
       的一行涂黑就可以了
    3) 具体例子请参见./os-src/toyos90/


## **5. mem命令** ##
    1) 我们不在显示桌面上的内存信息以及按键编码, 鼠标坐标等, 使用命令来显示
       机器的内存信息
    2) 具体例子请参见./os-src/toyos91/


## **6. clear命令** ##
    1) 我们来实现命令行窗口的清屏命令clear
    2) 我们开始使用string.h中的函数来判断命令(strcmp)
    3) 具体例子请参见./os-src/toyos92/


## **7. ls命令** ##
    1) 要实现ls命令, 需要读取磁盘, 这就需要借助BIOS
    2) 我们在进入32位的时候, 我们从磁盘中读取了很多内容, 这些数据放在了内存
       中的0x00100000 ~ 0x00267fff; 文件名的地方在0x00102600开始
    3) 这些写入的数据如下结构:
        typedef struct fileinfo_t {
          unsigned char name[8], ext[3], type;
          char reserve[10];           //! 保留
          unsigned short time, date;  //! 文件的时间
          unsigned short clustno;     //! 内容从磁盘上的哪个扇区开始存放
          unsigned int size;          //! 文件的大小
        } fileinfo_t;
        * 开始的8个字节是文件名字, 不足8字节用空格补齐(先不考虑超过8个字节的
          情况)
        * 文件名第一个字节是0xe5 -> 表示这个文件已经被删除了
          文件名第一个字节是0x00 -> 表示这一段不包含任何文件名信息
        * 文件信息最多可以存放224个 
        * 接下来3字节是文件扩展名, 不足3字节用空格补齐
        * 接下来1字节是文件的属性信息, 一般是0x20或0x00
          0x01  -> 只读文件(不可写入)
          0x02  -> 隐藏文件
          0x04  -> 系统文件
          0x08  -> 非文件信息(磁盘名称等)
          0x10  -> 目录
    4) 具体例子请参见./os-src/toyos93/

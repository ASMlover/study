# **保护操作系统** #
***


## **1. 攻克难题-字符串显示API** ##
    1) 现在的OS显示字符串的时候会出现问题, 应该是内存段出错造成的
    2) 显示单个字符的时候使用[cs:ecx]的方式特意指定cs, 因此可以成功读取msg的
       内容; 但是显示字符串的时候, 由于无法指定段地址, 程序会认为段地址是ds
       而从完全错误的内存中读取内容, 所以会出错
    3) toy_api并不知道代码段的起始位置位于内存的哪个地址, 这样我可以将代码段
       从cmd_app传到toy_api就可以了; 我只需要将起始地址存放在一个内存地址中
       就可以了
    4) 具体例子请参见./os-src/toyos9f/



## **2. 用C语言编写应用程序** ##
    1) 我们使用C语言来编写应用程序, 需要提供应用程序调用的C API, 而这个我们
       需要在汇编中实现
    2) 我们编译出来的C所写的toy文件, 我们需要修改其二进制的开头几个字节, 需
       要先调用0x1b这个地址的函数, 这个0x1b其实就是toy文件中入口函数的地址
    3) 但每次都修改编译出来的toy程序的开头几个字节实在是太麻烦了, 我们需要在
       操作系统中直接修改, 只需要在操作系统调用应用程序的地方对开头几个字节
       进行修改就可以了
    4) 具体例子请参见./os-src/toyosa0/
